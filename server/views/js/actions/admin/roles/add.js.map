{"version":3,"sources":["/src/js/actions/admin/roles/add.js"],"names":[],"mappings":"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","file":"/src/js/actions/admin/roles/add.js","sourcesContent":["import {ajaxErrorLog,dialogHandle} from '../dialog';\r\n//新增编辑角色模块事件处理\r\nfunction rolesAddRoleHandle(options){\r\n    return {\r\n        type:\"ADDROLE_HANDLE\",\r\n        options\r\n    }\r\n}\r\n\r\n\r\nfunction rolesGetAddTreeData(options){\r\n    return dispatch=>{\r\n        $.XlAjax({\r\n\t\t\turl:\"getPermissionsTreeAndLog\",\r\n\t\t\tdata:{\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tsuccess:function(data){\t\t\t\t\r\n\t\t\t\tif(data.status==\"0000\"){\r\n\t\t\t\t\tdispatch(rolesAddRoleHandle({\r\n                        treeData:data.data.trees\r\n                    }));\r\n\t\t\t\t\toptions.callback();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terrorDialog:function(xhr, errorType, error){\r\n\t\t\t\tajaxErrorLog(xhr, errorType, error,dispatch);\r\n\t\t\t}\r\n\t\t})\r\n    }\r\n}\r\n//编辑角色获取角色信息 （树形，和角色信息）\r\nfunction rolesEditLoadData(options){\r\n\treturn dispatch=>{\r\n        $.XlAjax({\r\n\t\t\turl:\"getPermissionsTreeAndLog\",\r\n\t\t\tdata:{\r\n\t\t\t\troleCode:options.roleCode\r\n\t\t\t},\r\n\t\t\tsuccess:function(data){\t\t\t\t\r\n\t\t\t\tif(data.status==\"0000\"){\r\n\t\t\t\t\tdispatch(rolesAddRoleHandle({\r\n                        treeData:data.data.trees,\r\n                        roleName:data.data.role.roleName,\r\n\t\t\t\t\t\troleDescribe:data.data.role.roleDesc,\r\n\t\t\t\t\t\tlogListData:data.data.operationLogs,\r\n                    }));\r\n                    \r\n\t\t\t\t\toptions.callback();\r\n\t\t\t\t\toptions.loadLog(data.data.operationLogs)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terrorDialog:function(xhr, errorType, error){\r\n\t\t\t\tajaxErrorLog(xhr, errorType, error,dispatch);\r\n\t\t\t}\r\n\t\t})\r\n    }\r\n}\r\n\r\n\r\n//编辑角色保存\r\nfunction rolesEditRole(options){\r\n\treturn dispatch=>{\r\n        $.XlAjax({\r\n\t\t\turl:\"editRole\",\r\n\t\t\tdata:{\r\n\t\t\t\troleCode:options.roleCode,\r\n\t\t\t\tid:options.id,\r\n\t\t\t\troleName:options.roleName,\r\n\t\t\t\troleDesc:options.roleDesc,\r\n\t\t\t\tpers:options.pers,\r\n\t\t\t\tperNames:options.perNames\r\n\t\t\t},\r\n\t\t\tsuccess:function(data){\r\n\t\t\t\tif(data.status==\"0000\"){\r\n\t\t\t\t\toptions.callback();\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdispatch(dialogHandle({\r\n\t\t\t\t\t\tshow:true,\r\n\t\t\t\t\t\tcontent:data.message,\r\n\t\t\t\t\t\ttype:\"tips\",\r\n\t\t\t\t\t\ttipsType:\"warning\"\r\n\t\t\t\t\t}));\t\r\n\t\t\t\t\tdispatch(rolesAddRoleHandle({\r\n\t\t\t\t\t\tsubmitFlag:true\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t},\r\n\t\t\terror:function(){\r\n\t\t\t\tdispatch(rolesAddRoleHandle({\r\n\t\t\t\t\t\tsubmitFlag:true\r\n\t\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\terrorDialog:function(xhr, errorType, error){\r\n\t\t\t\tajaxErrorLog(xhr, errorType, error,dispatch);\r\n\t\t\t}\r\n\t\t});\r\n    }\r\n}\r\n\r\n\r\n//新增角色保存\r\nfunction rolesAddRole(options){\r\n\treturn dispatch=>{\r\n        $.XlAjax({\r\n\t\t\turl:\"addRole\",\r\n\t\t\tdata:{\r\n\t\t\t\troleName:options.roleName,\r\n\t\t\t\troleDesc:options.roleDescribe,\r\n\t\t\t\tpers:options.pers,\r\n\t\t\t\tperNames:options.perNames\r\n\t\t\t},\r\n\t\t\tsuccess:function(data){\r\n\t\t\t\tif(data.status==\"0000\"){\r\n\t\t\t\t\toptions.callback();\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdispatch(dialogHandle({\r\n\t\t\t\t\t\tshow:true,\r\n\t\t\t\t\t\tcontent:data.message,\r\n\t\t\t\t\t\ttype:\"tips\",\r\n\t\t\t\t\t\ttipsType:\"warning\"\r\n\t\t\t\t\t}));\r\n\t\t\t\t\tdispatch(rolesAddRoleHandle({\r\n\t\t\t\t\t\tsubmitFlag:true\r\n\t\t\t\t\t}));\t\t\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t},\r\n\t\t\terror:function(){\r\n\t\t\t\tdispatch(rolesAddRoleHandle({\r\n\t\t\t\t\tsubmitFlag:true\r\n\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\terrorDialog:function(xhr, errorType, error){\r\n\t\t\t\tajaxErrorLog(xhr, errorType, error,dispatch);\r\n\t\t\t}\r\n\t\t});\r\n    }\r\n}\r\n\r\nexport {\r\n    rolesAddRoleHandle,rolesGetAddTreeData,rolesEditLoadData,rolesEditRole,rolesAddRole\r\n};\r\n"]}