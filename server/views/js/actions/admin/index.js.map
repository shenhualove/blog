{"version":3,"sources":["/src/js/actions/admin/index.js"],"names":[],"mappings":"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","file":"/src/js/actions/admin/index.js","sourcesContent":["/**\n * Created by apple on 17/3/29.\n */\nimport {dialogHandle,ajaxErrorLog} from './dialog';\n//登录模块事件处理\nfunction loginHandle(options){\n    return {\n        type:\"LOGIN_HANDLE\",\n        options\n    }\n}\n\n\n//登录接口\nfunction accountLogin(options){\n    var _this = this;\n    return dispatch=>{\n        $.XlAjax({\n            url:\"accountLogin\",\n            data:{\n                accountName:options.userName,\n                password:options.passWord\n            },\n            success:function(data){\n                if(data.status==\"0000\"){\n                    //登录成功\n                    dispatch(loginHandle({\n                        loginHash:true\n                    }));                    \n                    dispatch(getPermissions(data));\n                }else{\n                    dispatch(loginHandle({\n                        errorMsg:data.message,\n                        errorShow:true,\n                        loginHash:true\n                    }));\n                }\n            },\n            error:function(){\n                dispatch(loginHandle({\n                    loginHash:true\n                }));\n            },\n            errorDialog:function(xhr, errorType, error){\n                ajaxErrorLog(xhr, errorType, error,dispatch);\n            }\n        })\n    }\n}\n\n//处理登录数据\nfunction getPermissions(data){\n    return dispatch=>{\n        dispatch(loginHandle({\n            Jurisdiction:data.data.pers,\n            account:data.data.account,\n            employ:data.data.employeeTitles?data.data.employeeTitles[0]:{},\n            isLogin:true\n        }));\n    }\n}\n\n//发送短信\nfunction sendMessage(options){\n    return dispatch=>{\n        $.XlAjax({\n            url:\"sendMessage\",\n            data:{\n                mobilePhone:options.mobilePhone\n            },\n            success:function(data){\n                if(data.status==\"0000\"){//校验手机号码成功\n                    dispatch(dialogHandle({\n                        show:true,\n                        type:'tips',\n                        tipsType:'success',\n                        content:\"发送短信验证码成功\",\n                        time:2000\n                    }));\n                }else{\n                    dispatch(loginHandle({\n                        errorMsg:data.message,\n                        errorShow:true\n                    }));\n                }\n\n            },\n            errorDialog:function(xhr, errorType, error){\n                ajaxErrorLog(xhr, errorType, error,dispatch);\n            }\n        });\n    }\n}\n\n//根据手机号去匹配数据库\nfunction smsBiz(options){\n    return dispatch=>{\n        $.XlAjax({\n            url:\"smsBiz\",\n            data:{\n                mobilePhone:options.phoneNumber\n            },\n            success:function(data){\n                if(data.status==\"0000\"){//校验手机号码成功\n                    options.callback();\n                }else{\n                    dispatch(loginHandle({\n                        errorMsg:data.message,\n                        errorShow:true\n                    }));\n                }\n            },\n            errorDialog:function(xhr, errorType, error){\n                ajaxErrorLog(xhr, errorType, error,dispatch);\n            }\n        });\n    }\n}\n\n//验证短信验证码\nfunction validateSmsCode(options){\n    return dispatch=>{\n        $.XlAjax({\n            url:\"validateSmsCode\",\n            data:{\n                smsNumber:options.verificationCode,\n                mobilePhone:options.mobilePhone\n            },\n            success:function(data){\n                if(data.status==\"0000\"){\n                    options.callback();\n                }else{\n                    dispatch(loginHandle({\n                        errorMsg:data.message,\n                        errorShow:true\n                    }));\n                }\n            },\n            errorDialog:function(xhr, errorType, error){\n                ajaxErrorLog(xhr, errorType, error,dispatch);\n            }\n        })\n    }\n}\n\n//获取partyId\nfunction getPartyId(options){\n    return dispatch=>{\n        $.XlAjax({\n            url:\"next\",\n            data:{\n                mobilePhone:options.phoneNumber\n            },\n            success:function(data){\n                if(data.status==\"0000\"){\n                    dispatch(loginHandle({\n                        partyId:data.data.partyId,\n                        currentState:\"passowrd\",\n                        nextHash:true\n                    }));\n                }else{\n                    dispatch(loginHandle({\n                        errorMsg:data.message,\n                        errorShow:true,\n                        nextHash:true\n                    }));\n                }\n            },\n            error:function(){\n                dispatch(loginHandle({\n                    nextHash:true\n                }));\n            },\n            errorDialog:function(xhr, errorType, error){\n                ajaxErrorLog(xhr, errorType, error,dispatch);\n            }\n        })\n    }\n}\n\n//设置密码提交\nfunction submitPassword(options){\n    return dispatch=>{\n        $.XlAjax({\n            url:\"restPassWord\",\n            data:{\n                partyId:options.partyId,\n                newpwd:options.newpwd\n            },\n            success:function(data){\n                if(data.status==\"0000\"){\n                    //登录成功\n                    dispatch(loginHandle({\n                        setPsdHash:true\n                    }));\n                    dispatch(getPermissions(data));\n                }else{\n                    dispatch(loginHandle({\n                        errorMsg:data.message,\n                        errorShow:true,\n                        setPsdHash:true\n                    }));\n                }\n            },\n            error:function(){\n                dispatch(loginHandle({\n                    setPsdHash:true\n                }));\n            },\n            errorDialog:function(xhr, errorType, error){\n                ajaxErrorLog(xhr, errorType, error,dispatch);\n            }\n        })\n    }\n}\n\n\n\n\n\n\nexport {\n    loginHandle,accountLogin,sendMessage,smsBiz,\n    validateSmsCode,getPartyId,submitPassword\n};\n"]}