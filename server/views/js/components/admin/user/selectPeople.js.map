{"version":3,"sources":["/src/js/components/admin/user/selectPeople.js"],"names":[],"mappings":"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","file":"/src/js/components/admin/user/selectPeople.js","sourcesContent":["/**\r\n * Created by gaolei on 2017/4/17.\r\n *\r\n * 用户分配角色页面的选择角色功能\r\n */\r\nimport React from 'react';\r\n\r\nclass SelectPeople extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        console.log('shows')\r\n        console.log(this.props);\r\n        this.state={\r\n            show:false,\r\n            roleOldList:this.props.roleOldList,\r\n            bList:this.props.oldList\r\n        }\r\n    }\r\n\r\n    //判断是否在数组里\r\n    inArray(val) {\r\n        let userRoleList = this.state.bList;\r\n        let flag = false;\r\n        for (let i = 0; i < userRoleList.length; i++) {\r\n            if (userRoleList[i].roleCode == val.roleCode) {\r\n                flag = true;\r\n                return flag;\r\n            }\r\n        }\r\n        return flag;\r\n    }\r\n\r\n    //取消人员选择\r\n    cancelSelect(id,e){\r\n        e.nativeEvent.stopImmediatePropagation();\r\n        let listArray=this.state.bList;\r\n        for(let i=0;i<listArray.length;i++){\r\n            if(listArray[i].roleCode==id){\r\n                listArray.splice(i,1);\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            bList:listArray\r\n        },()=>{\r\n            this.props.selectCallBack(listArray);\r\n        })\r\n    }\r\n\r\n    //选择人员列表点击事件\r\n    selectPeople(id,name,e){\r\n\r\n        e.nativeEvent.stopImmediatePropagation();\r\n        let mList = this.state.bList;\r\n        let roleName = name, roleCode = id;\r\n        if (roleName == \"请选择\") {\r\n            return false;\r\n        } else {\r\n            if (this.inArray(\r\n                    {roleCode: roleCode, roleName: roleName}\r\n                )) {//数组里存在\r\n            } else {\r\n                this.setState({\r\n                    bList: mList.concat({roleCode: roleCode, roleName: roleName})\r\n                });\r\n                //回调函数触发修改外面的PROPS\r\n                this.props.selectCallBack(mList.concat({roleCode: roleCode, roleName: roleName}));\r\n            }\r\n        }\r\n    }\r\n    //显示人员列表\r\n    show(e){\r\n        e.nativeEvent.stopImmediatePropagation();\r\n        this.setState({show:true});\r\n    }\r\n    //返回列表数据\r\n    showList(){\r\n\r\n        let optionHtml = [];//<li class=\"l-item\" data-id=\"请选择\">请选择</li>\r\n        let roleOldList = this.state.roleOldList;\r\n        let bList = this.state.bList;\r\n        for (let j = 0; j < roleOldList.length; j++) {\r\n            let choose = false;\r\n            for (let k = 0; k < bList.length; k++) {\r\n                if (roleOldList[j].value == bList[k].roleCode) {\r\n                    choose = true;\r\n                }\r\n            }\r\n            if (roleOldList[j].name == \"超级管理员\" || roleOldList[j].name == \"普通用户\") {\r\n\r\n            } else {\r\n\r\n                if (choose) {\r\n                    optionHtml.push(<li key={roleOldList[j].value} className=\"l-item choose\" onClick={this.selectPeople.bind(this,roleOldList[j].value,roleOldList[j].name)}>{roleOldList[j].name}</li>);\r\n                } else {\r\n                    optionHtml.push(<li key={roleOldList[j].value} className=\"l-item\" onClick={this.selectPeople.bind(this,roleOldList[j].value,roleOldList[j].name)}>{roleOldList[j].name}</li>);\r\n                }\r\n            }\r\n        }\r\n        return optionHtml;\r\n    }\r\n\r\n    //显示插入人员列表\r\n    getInsertList(){\r\n        let innerHtml = [];\r\n        if(this.state.bList.length>0){\r\n            this.state.bList.map((item, i)=> {\r\n                if (item.roleName == \"超级管理员\" || item.roleName == \"普通用户\") {\r\n\r\n                } else {\r\n                    innerHtml.push(<div key={i} className=\"item\" ><span>{item.roleName}</span><span onClick={this.cancelSelect.bind(this,item.roleCode)} className=\"cancel\">X</span></div>)\r\n                }\r\n            });\r\n            return innerHtml;\r\n        }else{\r\n            return '请选择';\r\n        }\r\n    }\r\n\r\n    //隐藏列表\r\n    hide(){\r\n\r\n        this.setState({\r\n            show:false\r\n        });\r\n    }\r\n\r\n    componentDidMount(){\r\n        document.onclick=this.hide.bind(this);\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"a-c\">\r\n                <div className=\"a-left\">\r\n                    <span>请选择角色类型：</span>\r\n                </div>\r\n                <div className=\"a-box\" onClick={this.show.bind(this)}>\r\n                    <div className=\"box\">{this.getInsertList()}</div>\r\n                    <div className=\"a-s-box\" style={{display:this.state.show?'block':'none'}}>\r\n                        <ul className=\"list\">\r\n                           {this.showList()}\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SelectPeople;"]}