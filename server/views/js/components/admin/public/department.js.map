{"version":3,"sources":["/src/js/components/admin/public/department.js"],"names":[],"mappings":"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","file":"/src/js/components/admin/public/department.js","sourcesContent":["/**\r\n * Created by wanwan on 2017/4/20.\r\n *\r\n * 部门树形结构生成\r\n *\r\n * 传入数据格式\r\n * {\r\n    id:4500000,\r\n\tparent:\"#\",\r\n\ttcode:\"1000\",\r\n\ttext:\"宜农科技\",\r\n\ttype:\"业务服务类\",\r\n * }\r\n */\r\nimport React from 'react';\r\n\r\nclass DepartmentTree extends React.Component{\r\n\tconstructor(props){\r\n        super(props);\r\n        this.state={\r\n        \tdata:this.props.departmentData,\r\n        \tshow:false,\r\n        \ttcode:\"\",\r\n        \tinpText:this.props.value==\"\"?\"请选择\":this.props.value\r\n        }\r\n    }\r\n\t\r\n\t\r\n\tshowList(data){\r\n\t\tif(data.length>0){\r\n\t\t\tlet html = [];\r\n\t\t\tfor(let i=0;i<data.length;i++){\r\n\t\t\t\tif(data[i].parent == \"#\"){\r\n\t\t\t\t\thtml.push(<li  key={data[i].id}>\r\n\t               \t\t\t<p data-id={data[i].id}>\r\n\t\t               \t\t\t<i className={data[i].isChildOpen?\"yypt-icon-arrowDown\":\"yypt-icon-arrowRight\"} onClick={this.openChild.bind(this,data[i].id)}></i>\r\n\t\t               \t\t\t<span onClick={this.getSelectedText.bind(this,data[i].tcode,data[i].text)}>{data[i].text}</span>\r\n\t               \t\t\t</p>\r\n\t               \t\t\t<ul className=\"child-ul\" style={{display:data[i].isChildOpen?\"block\":\"none\"}}>\r\n\t               \t\t\t\t{this.getShowChildrenList(data,data[i].id)}\r\n\t               \t\t\t</ul>\r\n\t               \t\t</li>);\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetShowChildrenList(data,id){\r\n\t\tlet html = [];\r\n\t\tfor(let j=0;j<data.length;j++){\r\n\t\t\t\r\n\t\t\tif(data[j].parent == id){\r\n\t\t\t\tif(this.isHasChildren(data[j].id)){\r\n\t\t\t\t\t//有子菜单\r\n\t\t\t\t\thtml.push(<li key={data[j].id}>\r\n\t               \t\t\t<p data-id={data[j].id}>\r\n\t\t               \t\t\t<i className={data[j].isChildOpen?\"yypt-icon-arrowDown\":\"yypt-icon-arrowRight\"} onClick={this.openChild.bind(this,data[j].id)}></i>\r\n\t\t               \t\t\t<span onClick={this.getSelectedText.bind(this,data[j].tcode,data[j].text)}>{data[j].text}</span>\r\n\t               \t\t\t</p>\r\n\t               \t\t\t<ul className=\"child-ul\" style={{display:data[j].isChildOpen?\"block\":\"none\"}}>\r\n\t               \t\t\t\t{this.getShowChildrenList(data,data[j].id)}\r\n\t               \t\t\t</ul>\r\n\t               \t\t</li>);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//没有子菜单\r\n\t\t\t\t\thtml.push(<li key={data[j].id}>\r\n\t               \t\t\t<p data-id={data[j].id}>\r\n\t\t               \t\t\t<i></i>\r\n\t\t               \t\t\t<span onClick={this.getSelectedText.bind(this,data[j].tcode,data[j].text)}>{data[j].text}</span>\r\n\t               \t\t\t</p>\r\n\t               \t\t</li>);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n\t\r\n\t//判断是否有子部门\r\n\tisHasChildren(id){\r\n\t\tlet data = this.props.departmentData;\r\n\t\tlet isChild = false;\r\n\t\tfor(let i=0;i<data.length;i++){\r\n\t\t\tif(data[i].parent == id){\r\n\t\t\t\tisChild = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isChild;\r\n\t\t\r\n\t}\r\n\t\r\n\t//子部门展示隐藏\r\n\topenChild(id){\t\t\r\n\t\tlet data = this.props.departmentData;\r\n\r\n\t\tfor(let i=0;i<data.length;i++){\r\n\t\t\tif(data[i].id == id || data[i].parenet == id){\r\n\t\t\t\tdata[i].isChildOpen = !data[i].isChildOpen;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tdata:data\r\n\t\t},()=>{\r\n\t\t\t//console.log(this.state.data);\r\n\t\t});\t\t\r\n\t}\r\n\t\r\n\t//监听状态变化\r\n\tcomponentWillReceiveProps(props){\r\n\t\tthis.setState({\r\n\t\t\tdata:props.departmentData,\r\n        \tshow:false,\r\n        \ttcode:\"\",\r\n        \tinpText:props.value==\"\"?\"请选择\":props.value\r\n\t\t})\r\n\t}\r\n\t\r\n\t//或得点击文案\r\n\tgetSelectedText(tcode,inpText){\r\n\t\tthis.setState({\r\n\t\t\ttcode:tcode,\r\n\t\t\tinpText:inpText,\r\n\t\t\tshow:false\r\n\t\t});\r\n\t\tthis.props.callBack(tcode,inpText);\r\n\t}\r\n\t\r\n\t//展示隐藏tree\r\n\tshowTree(){\r\n\t\tthis.setState({\r\n\t\t\tshow:!this.state.show\r\n\t\t});\r\n\t}\r\n\t\r\n\tmouseLeave(){\r\n        this.setState({\r\n            show:false\r\n        })\r\n    }\r\n\r\n    render(){\r\n        return(\r\n        \t<div className=\"departMent-tree-wrapper\" onMouseLeave={this.mouseLeave.bind(this)}>\r\n        \t\t<input placeholder=\"请选择\" onClick={this.showTree.bind(this)} readOnly=\"readonly\" value={this.state.inpText} />\r\n\t        \t<div className=\"departMent-tree-wrap\" style={{display:this.state.show?\"block\":\"none\"}}>\r\n\t\t            <ul className=\"departMent-tree\">\r\n\t\t              <li>\r\n\t\t\t              <p>\r\n\t\t\t\t              <i></i>\r\n\t\t\t\t              <span onClick={this.getSelectedText.bind(this,\"\",\"请选择\")}>请选择</span>\r\n\t\t\t              </p>\r\n\t\t              </li>\r\n\t\t              {this.showList(this.props.departmentData)}\r\n\t\t            </ul>\r\n\t            </div>\r\n        \t</div>\r\n        \t\r\n        )\r\n    }\r\n}\r\n\r\nexport default DepartmentTree;"]}